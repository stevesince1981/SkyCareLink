{% extends "consumer_base.html" %}

{% block title %}Join as Individual - MediFly{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white text-center">
                    <h3><i class="fas fa-user me-2"></i>Join as Individual</h3>
                    <p class="mb-0">Personal medical transport access</p>
                </div>
                <div class="card-body">
                    <!-- Phase 12.C: Individual registration form -->
                    <form method="POST" action="/join_individual" id="individualForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="first_name" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="first_name" name="first_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="last_name" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="last_name" name="last_name" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address *</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                            <small class="text-muted">Required for booking confirmations and updates</small>
                        </div>
                        
                        <div class="mb-3">
                            <label for="mobile_phone" class="form-label">Mobile Phone *</label>
                            <input type="tel" class="form-control" id="mobile_phone" name="mobile_phone" required 
                                   placeholder="(555) 123-4567">
                            <small class="text-muted">Required for urgent transport communications</small>
                        </div>
                        
                        <div class="mb-3">
                            <label for="password" class="form-label">Password *</label>
                            <input type="password" class="form-control" id="password" name="password" required minlength="8">
                        </div>
                        
                        <div class="mb-3">
                            <label for="confirm_password" class="form-label">Confirm Password *</label>
                            <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                        </div>
                        
                        <!-- Phase 12.C: No DOB field for individuals -->
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="marketing_opt_in" name="marketing_opt_in">
                            <label class="form-check-label" for="marketing_opt_in">
                                I would like to receive updates about new features and medical transport tips
                            </label>
                        </div>
                        
                        <!-- Required Confirmations -->
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="pricing_understood" name="pricing_understood" required>
                            <label class="form-check-label" for="pricing_understood">
                                I understand the pricing structure: first booking free, subsequent bookings require payment or lifetime access *
                            </label>
                        </div>

                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="terms_accepted" name="terms_accepted" required>
                            <label class="form-check-label" for="terms_accepted">
                                I agree to the <a href="#" onclick="openTermsModal(); return false;">Terms of Service</a> and <a href="#" onclick="openPrivacyModal(); return false;">Privacy Policy</a> *
                            </label>
                        </div>
                        
                        <!-- Referral Information Section -->
                        <div class="alert alert-success">
                            <h6><i class="fas fa-users me-2"></i>Referral Program</h6>
                            <div class="mb-3">
                                <label for="referral_code" class="form-label">Referral Code (Optional)</label>
                                <input type="text" class="form-control" id="referral_code" name="referral_code" 
                                       placeholder="Enter referral code if you have one">
                                <small class="text-muted">Enter a referral code to benefit both you and your referrer</small>
                            </div>
                        </div>

                        <!-- Pricing Structure & Referral Benefits -->
                        <div class="alert alert-info">
                            <h6><i class="fas fa-dollar-sign me-2"></i>Pricing Structure & Referral Benefits</h6>
                            <ul class="mb-2">
                                <li><strong>First booking:</strong> Always free (standard transport quotes)</li>
                                <li><strong>Subsequent bookings:</strong> $99 one-time lifetime access OR $9.99/month</li>
                                <li><strong>Referral Bonus:</strong> When someone you refer completes their first paid booking, you get lifetime access for free!</li>
                            </ul>
                            <p class="mb-0"><strong>Your Referral Code:</strong> Will be generated after account creation</p>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-user-plus me-2"></i>Create Individual Account
                        </button>
                    </form>
                </div>
                <div class="card-footer text-center">
                    <small class="text-muted">
                        Already have an account? <a href="{{ url_for('login') }}">Login here</a>
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('individualForm').addEventListener('submit', function(e) {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm_password').value;
    
    if (password !== confirmPassword) {
        e.preventDefault();
        alert('Passwords do not match');
        return false;
    }
});
</script>
{% endblock %}