{% extends "consumer_base.html" %}

{% block title %}Affiliate Registration - MediFly{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-primary mb-3">
                    <i class="fas fa-plane me-3"></i>
                    Join as Transport Provider
                </h1>
                <p class="lead text-muted">
                    Partner with MediFly to expand your medical transport business
                </p>
            </div>

            <!-- Benefits Section -->
            <div class="card border-primary mb-4">
                <div class="card-header bg-primary text-white">
                    <h4 class="card-title mb-0">
                        <i class="fas fa-star me-2"></i>Partner Benefits
                    </h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>Fair quote distribution</strong> - Equal opportunities for all partners
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>Fast payments</strong> - Weekly ACH transfers
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>No upfront costs</strong> - Commission-based partnership
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>Marketing support</strong> - Increased bookings through our network
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>24/7 coordination</strong> - Dedicated support team
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    <strong>Technology platform</strong> - Modern booking and tracking tools
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Commission Information -->
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Commission Structure:</strong> Adjustable rates from 3.0% to 7.0% (default 5.0%). 
                First $25,000 in bookings help recoup our onboarding costs, then your negotiated rate applies.
            </div>

            <!-- Registration Form -->
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title mb-0">Company Registration</h4>
                </div>
                <div class="card-body">
                    <form method="post" action="{{ url_for('join_affiliate') }}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="companyName" class="form-label">Company Name *</label>
                                <input type="text" class="form-control" id="companyName" name="company_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="operatorType" class="form-label">Operator Type</label>
                                <select class="form-select" id="operatorType" name="operator_type">
                                    <option value="air_ambulance">Air Ambulance</option>
                                    <option value="helicopter">Helicopter EMS</option>
                                    <option value="fixed_wing">Fixed Wing</option>
                                    <option value="dual_service">Dual Service (Both)</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="contactName" class="form-label">Primary Contact Name *</label>
                                <input type="text" class="form-control" id="contactName" name="contact_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="contactTitle" class="form-label">Contact Title</label>
                                <input type="text" class="form-control" id="contactTitle" name="contact_title" 
                                       placeholder="e.g., Operations Manager, Business Development">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Business Email *</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Business Phone *</label>
                                <input type="tel" class="form-control" id="phone" name="phone" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="businessAddress" class="form-label">Business Address *</label>
                            <textarea class="form-control" id="businessAddress" name="business_address" rows="3" required 
                                      placeholder="Full business address including city, state, and ZIP code"></textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="commissionPercent" class="form-label">Preferred Commission Rate (%)</label>
                                <select class="form-select" id="commissionPercent" name="commission_percent">
                                    <option value="3.0">3.0% - Volume Partner</option>
                                    <option value="4.0">4.0% - High Volume</option>
                                    <option value="5.0" selected>5.0% - Standard Rate</option>
                                    <option value="6.0">6.0% - Specialty Services</option>
                                    <option value="7.0">7.0% - Premium/Concierge</option>
                                </select>
                                <div class="form-text">Final rate subject to approval based on services and volume</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="serviceArea" class="form-label">Primary Service Area</label>
                                <select class="form-select" id="serviceArea" name="service_area">
                                    <option value="southeast">Southeast</option>
                                    <option value="northeast">Northeast</option>
                                    <option value="midwest">Midwest</option>
                                    <option value="west">West</option>
                                    <option value="southwest">Southwest</option>
                                    <option value="national">National</option>
                                </select>
                            </div>
                        </div>

                        <!-- Fleet Information -->
                        <div class="card bg-light mb-3">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-helicopter me-2"></i>Fleet Information
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="fleetSize" class="form-label">Total Aircraft</label>
                                        <input type="number" class="form-control" id="fleetSize" name="fleet_size" min="1">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="aircraftTypes" class="form-label">Aircraft Types</label>
                                        <input type="text" class="form-control" id="aircraftTypes" name="aircraft_types" 
                                               placeholder="e.g., EC135, King Air 350, Learjet 60">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Available Equipment</label>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="ventilator" id="equipVentilator">
                                                <label class="form-check-label" for="equipVentilator">Ventilator</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="ecmo" id="equipECMO">
                                                <label class="form-check-label" for="equipECMO">ECMO</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="incubator" id="equipIncubator">
                                                <label class="form-check-label" for="equipIncubator">Neonatal Incubator</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="iabp" id="equipIABP">
                                                <label class="form-check-label" for="equipIABP">IABP</label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="dialysis" id="equipDialysis">
                                                <label class="form-check-label" for="equipDialysis">Dialysis</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="equipment[]" value="specialty" id="equipSpecialty">
                                                <label class="form-check-label" for="equipSpecialty">Specialty Equipment</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Concierge Services -->
                        <div class="card bg-warning bg-opacity-10 border-warning mb-3">
                            <div class="card-header bg-warning text-dark">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-crown me-2"></i>Premium Concierge Services
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="offersConcierge" name="offers_concierge">
                                    <label class="form-check-label" for="offersConcierge">
                                        <strong>Offer Concierge Services</strong>
                                    </label>
                                    <div class="form-text">
                                        Concierge services include premium support, family coordination, 
                                        and enhanced care management for a $15,000 add-on fee (split $7,500 each).
                                    </div>
                                </div>
                                
                                <div class="alert alert-info">
                                    <strong>Concierge Benefits:</strong>
                                    <ul class="mb-0 mt-2">
                                        <li>Premium service designation in quote displays</li>
                                        <li>Higher visibility for qualified requests</li>
                                        <li>Additional revenue stream with shared model</li>
                                        <li>Enhanced customer satisfaction metrics</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Certifications -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="part135" name="certifications[]" value="part135" required>
                                    <label class="form-check-label" for="part135">
                                        <strong>FAA Part 135 Certified *</strong>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="camts" name="certifications[]" value="camts">
                                    <label class="form-check-label" for="camts">
                                        CAMTS Accredited
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="operatingHours" class="form-label">Operating Hours</label>
                            <select class="form-select" id="operatingHours" name="operating_hours">
                                <option value="24_7">24/7 Operations</option>
                                <option value="business_hours">Business Hours Only</option>
                                <option value="extended">Extended Hours (6 AM - 10 PM)</option>
                                <option value="on_call">On-Call Availability</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="additionalInfo" class="form-label">Additional Information</label>
                            <textarea class="form-control" id="additionalInfo" name="additional_info" rows="3" 
                                      placeholder="Tell us about any special capabilities, unique services, or partnership goals..."></textarea>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="termsAgreement" required>
                                <label class="form-check-label" for="termsAgreement">
                                    I agree to the <a href="#" target="_blank">Terms of Service</a>, 
                                    <a href="#" target="_blank">Partner Agreement</a>, and 
                                    <a href="#" target="_blank">Commission Structure</a> *
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="insuranceVerification" required>
                                <label class="form-check-label" for="insuranceVerification">
                                    I confirm that my company maintains adequate insurance coverage 
                                    and will provide certificates upon approval *
                                </label>
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>
                                Submit Partnership Application
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="card bg-light mt-4">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-list-ol me-2"></i>Next Steps
                    </h5>
                    <ol class="mb-0">
                        <li>Submit your application with all required information</li>
                        <li>Our team will review your credentials and certifications</li>
                        <li>Complete background verification and insurance review</li>
                        <li>Sign partnership agreement and commission structure</li>
                        <li>Platform onboarding and training (1-2 weeks)</li>
                        <li>Start receiving qualified transport requests</li>
                    </ol>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="mt-4 text-center">
                <p class="text-muted">
                    Questions about partnership? Contact our Business Development team at 
                    <a href="mailto:partners@medifly.com">partners@medifly.com</a> 
                    or call <strong>(555) 123-4567</strong>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Form validation
    const form = document.querySelector('form');
    const requiredCheckboxes = ['termsAgreement', 'insuranceVerification', 'part135'];
    
    form.addEventListener('submit', function(e) {
        let valid = true;
        
        requiredCheckboxes.forEach(id => {
            const checkbox = document.getElementById(id);
            if (!checkbox.checked) {
                valid = false;
                checkbox.focus();
            }
        });
        
        if (!valid) {
            e.preventDefault();
            alert('Please agree to all required terms and certifications.');
        }
    });
    
    // Phone number formatting
    const phoneInput = document.getElementById('phone');
    phoneInput.addEventListener('input', function() {
        let value = this.value.replace(/\D/g, '');
        if (value.length >= 6) {
            value = value.substring(0, 3) + '-' + value.substring(3, 6) + '-' + value.substring(6, 10);
        } else if (value.length >= 3) {
            value = value.substring(0, 3) + '-' + value.substring(3);
        }
        this.value = value;
    });
    
    // Commission rate guidance
    const commissionSelect = document.getElementById('commissionPercent');
    commissionSelect.addEventListener('change', function() {
        const value = parseFloat(this.value);
        let message = '';
        
        if (value <= 4.0) {
            message = 'Volume partnership rates typically require 50+ bookings annually';
        } else if (value >= 6.0) {
            message = 'Premium rates available for specialized services or concierge offerings';
        } else {
            message = 'Standard rate suitable for most partnership arrangements';
        }
        
        // Show guidance message
        const guidance = this.parentNode.querySelector('.form-text');
        guidance.textContent = message;
    });
});
</script>
{% endblock %}