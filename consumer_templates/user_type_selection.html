{% extends "consumer_base.html" %}

{% block title %}Join SkyCareLink - Select Your Account Type{% endblock %}

{% block head %}
<style>
.user-type-card {
    transition: all 0.3s ease;
    cursor: pointer;
    min-height: 300px;
}

.user-type-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

.user-type-card.selected {
    border: 3px solid #007bff;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,123,255,0.2);
}

.user-type-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.selection-section {
    padding: 3rem 0;
    background: #f8f9fa;
}
</style>
{% endblock %}

{% block content %}
<section class="selection-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="text-center mb-5">
                    <h1 class="h2 mb-3">Join SkyCareLink</h1>
                    <p class="lead text-muted">Choose your account type to get started</p>
                </div>

                <div class="row g-4 mb-5">
                    <!-- Affiliate Card -->
                    <div class="col-12 col-md-4">
                        <div class="card user-type-card h-100" onclick="selectUserType('affiliate', this)">
                            <div class="card-body text-center d-flex flex-column">
                                <div class="user-type-icon text-primary">
                                    <i class="fas fa-helicopter"></i>
                                </div>
                                <h4 class="card-title mb-3">Affiliate</h4>
                                <p class="card-text flex-grow-1">Air medical transport providers looking to join our network and receive quote requests from patients and hospitals.</p>
                                <ul class="list-unstyled text-start mt-3">
                                    <li><i class="fas fa-check text-success me-2"></i>Receive qualified leads</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Competitive commission structure</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Professional dashboard</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Provider Card -->
                    <div class="col-12 col-md-4">
                        <div class="card user-type-card h-100" onclick="selectUserType('provider', this)">
                            <div class="card-body text-center d-flex flex-column">
                                <div class="user-type-icon text-success">
                                    <i class="fas fa-hospital"></i>
                                </div>
                                <h4 class="card-title mb-3">Healthcare Provider</h4>
                                <p class="card-text flex-grow-1">Hospitals, clinics, and healthcare facilities needing to arrange medical transport for patients.</p>
                                <ul class="list-unstyled text-start mt-3">
                                    <li><i class="fas fa-check text-success me-2"></i>Quick quote requests</li>
                                    <li><i class="fas fa-check text-success me-2"></i>HIPAA compliant platform</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Multiple provider options</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Individual Card -->
                    <div class="col-12 col-md-4">
                        <div class="card user-type-card h-100" onclick="selectUserType('individual', this)">
                            <div class="card-body text-center d-flex flex-column">
                                <div class="user-type-icon text-warning">
                                    <i class="fas fa-users"></i>
                                </div>
                                <h4 class="card-title mb-3">Individual</h4>
                                <p class="card-text flex-grow-1">Families and individuals who need medical transport services for themselves or loved ones.</p>
                                <ul class="list-unstyled text-start mt-3">
                                    <li><i class="fas fa-check text-success me-2"></i>Compare multiple quotes</li>
                                    <li><i class="fas fa-check text-success me-2"></i>Transparent pricing</li>
                                    <li><i class="fas fa-check text-success me-2"></i>24/7 support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Registration Forms for Each Type -->
                <div id="registrationForms" style="display: none;">
                    <!-- Show message and direct to proper registration pages -->
                    <div class="text-center">
                        <p class="lead mb-4">You'll now be redirected to the detailed registration form for your selected account type.</p>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            This will include all the detailed fields like coverage regions, 24/7 contact numbers, and service-specific options that were previously developed.
                        </div>
                        <button type="button" class="btn btn-secondary" onclick="goBack()">
                            <i class="fas fa-arrow-left me-2"></i>Back to Selection
                        </button>
                    </div>
                </div>

                <!-- Initial Continue Button (shown when no type selected) -->
                <div id="initialContinue" class="text-center">
                    <p class="text-muted mb-4">Select an account type above to continue</p>
                    <div class="text-center mt-3">
                        <p class="text-muted">
                            Already have an account? 
                            <a href="{{ url_for('auth.login') }}" class="text-decoration-none">Sign in here</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
let selectedType = '';

function selectUserType(type, element) {
    // Remove previous selection
    document.querySelectorAll('.user-type-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // Add selection to clicked card
    element.classList.add('selected');
    
    // Store selected type
    selectedType = type;
    
    // Redirect to the existing detailed registration pages
    if (type === 'affiliate') {
        window.location.href = '/join_affiliate';
    } else if (type === 'provider') {
        window.location.href = '/join_hospital';
    } else if (type === 'individual') {
        window.location.href = '/join_individual';
    }
}

function goBack() {
    // Hide registration forms
    document.getElementById('registrationForms').style.display = 'none';
    
    // Show user type selection cards and initial continue button
    document.querySelector('.row.g-4.mb-5').style.display = '';
    document.getElementById('initialContinue').style.display = 'block';
    
    // Remove selection
    document.querySelectorAll('.user-type-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    selectedType = '';
}
</script>
{% endblock %}