{% extends "consumer_base.html" %}

{% block title %}Join SkyCareLink - Select Your Account Type{% endblock %}

{% block head %}
<style>
.user-type-card {
    transition: all 0.3s ease;
    cursor: pointer;
    min-height: 300px;
}

.user-type-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

.user-type-card.selected {
    border: 3px solid #007bff;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,123,255,0.2);
}

.user-type-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.selection-section {
    padding: 3rem 0;
    background: #f8f9fa;
}
</style>
{% endblock %}

{% block content %}
<section class="selection-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-10">
                <div class="text-center mb-5">
                    <h1 class="h2 mb-3">Join SkyCareLink</h1>
                    <p class="lead text-muted">Choose your account type to get started</p>
                </div>

                <div class="text-center mb-4">
                    <h4>Select Your Role</h4>
                </div>
                <div class="row justify-content-center mb-4">
                    <!-- Transport Affiliate Card -->
                    <div class="col-md-3 mb-3">
                        <div id="transportCard" class="card text-center h-100 border-2" onclick="selectUserType('affiliate', this)" style="cursor: pointer; transition: all 0.2s;">
                            <div class="card-body py-4">
                                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-2" style="width: 60px; height: 60px;">
                                    <i class="fas fa-plane" style="font-size: 1.5rem;"></i>
                                </div>
                                <h6 class="card-title text-primary mb-2">Transport Affiliate</h6>
                                <small class="text-muted">Flight transport companies and air ambulance operators</small>
                            </div>
                        </div>
                    </div>

                    <!-- Healthcare Provider Card -->
                    <div class="col-md-3 mb-3">
                        <div id="providerCard" class="card text-center h-100 border-2" onclick="selectUserType('provider', this)" style="cursor: pointer; transition: all 0.2s;">
                            <div class="card-body py-4">
                                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-2" style="width: 60px; height: 60px;">
                                    <i class="fas fa-hospital" style="font-size: 1.5rem;"></i>
                                </div>
                                <h6 class="card-title text-primary mb-2">Healthcare Provider</h6>
                                <small class="text-muted">Hospitals, clinics, and medical facilities</small>
                            </div>
                        </div>
                    </div>

                    <!-- Individual Card -->
                    <div class="col-md-3 mb-3">
                        <div id="individualCard" class="card text-center h-100 border-2" onclick="selectUserType('individual', this)" style="cursor: pointer; transition: all 0.2s;">
                            <div class="card-body py-4">
                                <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center mb-2" style="width: 60px; height: 60px;">
                                    <i class="fas fa-users" style="font-size: 1.5rem;"></i>
                                </div>
                                <h6 class="card-title text-primary mb-2">Individual</h6>
                                <small class="text-muted">Patients, families, and individual users</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Registration Forms for Each Type -->
                <div id="registrationForms" style="display: none;">
                    
                    <!-- Affiliate Registration Form -->
                    <div id="affiliateForm" class="registration-form" style="display: none;">
                        <div class="card border-0 shadow-sm">
                            <!-- Header with Blue Airplane Icon -->
                            <div class="text-center py-4" style="background: linear-gradient(135deg, #4A90E2, #357ABD);">
                                <i class="fas fa-plane text-white" style="font-size: 2.5rem;"></i>
                                <h3 class="text-white mt-2 mb-1">Join as Transport Affiliate</h3>
                                <p class="text-white mb-0 opacity-75">Partner with SkyCareLink to expand your medical transport business</p>
                            </div>
                            
                            <!-- Affiliate Benefits Section -->
                            <div class="bg-primary text-white px-4 py-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-star me-2"></i>
                                    <strong>Affiliate Benefits</strong>
                                </div>
                                <div class="row small">
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Fair quote distribution</strong> - Equal opportunities for all partners
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Fast payments</strong> - Weekly ACH transfers
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>1% payback system</strong> - Affiliate fee reimbursed through flights (first year only)
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Marketing support</strong> - Increased bookings through our network
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>24/7 coordination</strong> - Dedicated support team
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Technology platform</strong> - Modern booking and tracking tools
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Fee Structure Alerts -->
                            <div class="px-4 py-2">
                                <div class="alert alert-warning d-flex align-items-center mb-2 py-2">
                                    <i class="fas fa-star text-warning me-2"></i>
                                    <small><strong>Year One:</strong> $25,000 fee with 1% payback. Refundable if minimum opportunities not delivered.</small>
                                </div>
                                <div class="alert alert-info d-flex align-items-center mb-3 py-2">
                                    <i class="fas fa-info-circle text-info me-2"></i>
                                    <small><strong>Year Two:</strong> $10,000 fee. No payback needed as platform is proven.</small>
                                </div>
                            </div>

                            <div class="card-body px-4">
                                <h6 class="mb-3">Company Registration</h6>
                                <form method="POST" action="{{ url_for('join_affiliate') }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="company_name" class="form-label">Company Name *</label>
                                            <input type="text" class="form-control" id="company_name" name="company_name" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="contact_name" class="form-label">Primary Contact Name *</label>
                                            <input type="text" class="form-control" id="contact_name" name="contact_name" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="email" class="form-label">Email *</label>
                                            <input type="email" class="form-control" id="email" name="email" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="phone" class="form-label">Phone (Cell) *</label>
                                            <input type="tel" class="form-control" id="phone" name="phone" required>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="phone_24_7" class="form-label">Phone (24/7 number)</label>
                                        <input type="tel" class="form-control" id="phone_24_7" name="phone_24_7">
                                        <div class="form-check mt-2">
                                            <input class="form-check-input" type="checkbox" id="same_as_cell" name="same_as_cell">
                                            <label class="form-check-label" for="same_as_cell">
                                                Same as cell phone
                                            </label>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label">Coverage Areas *</label>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="east_coast" id="east_coast">
                                                    <label class="form-check-label" for="east_coast">East Coast</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="central_us" id="central_us">
                                                    <label class="form-check-label" for="central_us">Central US</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="west_coast" id="west_coast">
                                                    <label class="form-check-label" for="west_coast">West Coast</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="southwest" id="southwest">
                                                    <label class="form-check-label" for="southwest">Southwest</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="southeast" id="southeast">
                                                    <label class="form-check-label" for="southeast">Southeast</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="midwest" id="midwest">
                                                    <label class="form-check-label" for="midwest">Midwest</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="international" id="international">
                                                    <label class="form-check-label" for="international">International</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="coverage_areas[]" value="alaska_hawaii" id="alaska_hawaii">
                                                    <label class="form-check-label" for="alaska_hawaii">Alaska/Hawaii</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label class="form-label">Services Offered *</label>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="emergency_transport" id="emergency_transport">
                                                    <label class="form-check-label" for="emergency_transport">Emergency Transport</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="scheduled_transport" id="scheduled_transport">
                                                    <label class="form-check-label" for="scheduled_transport">Scheduled Transport</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="international_flights" id="international_flights">
                                                    <label class="form-check-label" for="international_flights">International Flights</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="concierge_services" id="concierge_services">
                                                    <label class="form-check-label" for="concierge_services">Concierge Services</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="24_7_availability" id="24_7_availability">
                                                    <label class="form-check-label" for="24_7_availability">24/7 Availability</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="services[]" value="nicu_specialist" id="nicu_specialist">
                                                    <label class="form-check-label" for="nicu_specialist">NICU Specialist</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <h6>Communication Preferences</h6>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="email_updates" id="email_updates" checked>
                                                    <label class="form-check-label" for="email_updates">Email Updates</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="sms_notifications" id="sms_notifications">
                                                    <label class="form-check-label" for="sms_notifications">SMS Notifications</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="phone_calls" id="phone_calls">
                                                    <label class="form-check-label" for="phone_calls">Phone Calls</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="newsletter" id="newsletter">
                                                    <label class="form-check-label" for="newsletter">Newsletter</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-paper-plane me-2"></i>Complete Registration
                                        </button>
                                    </div>

                                    <div class="text-center mt-3">
                                        <small class="text-muted">
                                            By registering, you agree to our 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Terms of Service</a> and 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Privacy Policy</a>
                                        </small>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Provider Registration Form -->
                    <div id="providerForm" class="registration-form" style="display: none;">
                        <div class="card border-0 shadow-sm">
                            <!-- Header with Blue Hospital Icon -->
                            <div class="text-center py-4" style="background: linear-gradient(135deg, #4A90E2, #357ABD);">
                                <i class="fas fa-hospital text-white" style="font-size: 2.5rem;"></i>
                                <h3 class="text-white mt-2 mb-1">Join as Hospital/Clinic</h3>
                                <p class="text-white mb-0 opacity-75">Connect your facility to our medical transport network</p>
                            </div>
                            
                            <!-- Membership Benefits Section -->
                            <div class="bg-success text-white px-4 py-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-star me-2"></i>
                                    <strong>Membership Benefits</strong>
                                </div>
                                <div class="row small">
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Free for 1 year</strong> post-launch
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>+1 year free</strong> when you refer 5 additional providers
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Free for life</strong> after referrals complete flight
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Priority booking</strong> for urgent transports
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Bulk pricing</strong> for multiple bookings
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Dedicated support</strong> team
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Fee Structure Alerts -->
                            <div class="px-4 py-2">
                                <div class="alert alert-info d-flex align-items-center mb-2 py-2">
                                    <i class="fas fa-info-circle text-info me-2"></i>
                                    <small><strong>Year One Launch Offer:</strong> Join free for the first 12 months from official go live date. No annual membership fees during initial period.</small>
                                </div>
                                <div class="alert alert-warning d-flex align-items-center mb-3 py-2">
                                    <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                    <small><strong>Year Two and Beyond:</strong> $50 per annual fee per be handled through referrals. Refer 5 providers for free each year, or get lifetime free membership when a referred books a flight.</small>
                                </div>
                            </div>

                            <div class="card-body px-4">
                                <h6 class="mb-3">Provider Information</h6>
                                <form method="POST" action="{{ url_for('join_hospital') }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="provider_name" class="form-label">Provider Name *</label>
                                            <input type="text" class="form-control" id="provider_name" name="provider_name" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="primary_contact_name" class="form-label">Primary Contact Name *</label>
                                            <input type="text" class="form-control" id="primary_contact_name" name="primary_contact_name" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="email" class="form-label">Email *</label>
                                            <input type="email" class="form-control" id="email" name="email" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="phone" class="form-label">Phone (Cell) *</label>
                                            <input type="tel" class="form-control" id="phone" name="phone" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="provider_type" class="form-label">Provider Type *</label>
                                            <select class="form-select" id="provider_type" name="provider_type" required>
                                                <option value="">Select Provider Type</option>
                                                <option value="hospital">Hospital</option>
                                                <option value="clinic">Clinic</option>
                                                <option value="urgent_care">Urgent Care</option>
                                                <option value="rehab_center">Rehabilitation Center</option>
                                                <option value="skilled_nursing">Skilled Nursing Facility</option>
                                                <option value="dialysis_center">Dialysis Center</option>
                                                <option value="surgery_center">Surgery Center</option>
                                                <option value="imaging_center">Imaging Center</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="phone_24_7" class="form-label">Phone (24/7 number)</label>
                                            <input type="tel" class="form-control" id="phone_24_7" name="phone_24_7">
                                            <div class="form-check mt-2">
                                                <input class="form-check-input" type="checkbox" id="same_as_cell_provider" name="same_as_cell">
                                                <label class="form-check-label" for="same_as_cell_provider">
                                                    24/7 number same as cell phone
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="provider_address" class="form-label">Provider Address *</label>
                                        <textarea class="form-control" id="provider_address" name="provider_address" rows="2" required 
                                                  placeholder="Street Address"></textarea>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-3 mb-3">
                                            <label for="city" class="form-label">City *</label>
                                            <input type="text" class="form-control" id="city" name="city" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="state" class="form-label">State *</label>
                                            <input type="text" class="form-control" id="state" name="state" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="zip_code" class="form-label">ZIP Code *</label>
                                            <input type="text" class="form-control" id="zip_code" name="zip_code" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="country" class="form-label">Country *</label>
                                            <select class="form-select" id="country" name="country" required>
                                                <option value="">Select Country</option>
                                                <option value="US" selected>United States</option>
                                                <option value="CA">Canada</option>
                                                <option value="MX">Mexico</option>
                                                <option value="GB">United Kingdom</option>
                                                <option value="AU">Australia</option>
                                                <option value="DE">Germany</option>
                                                <option value="FR">France</option>
                                                <option value="IT">Italy</option>
                                                <option value="ES">Spain</option>
                                                <option value="JP">Japan</option>
                                                <option value="BR">Brazil</option>
                                                <option value="IN">India</option>
                                                <option value="CN">China</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <h6>Communication Preferences</h6>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="communication[]" value="email_updates" id="provider_email_updates" checked>
                                                <label class="form-check-label" for="provider_email_updates">Email Updates</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="communication[]" value="sms_notifications" id="provider_sms">
                                                <label class="form-check-label" for="provider_sms">SMS Notifications</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <div class="mt-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="phone_calls" id="provider_phone_calls">
                                                    <label class="form-check-label" for="provider_phone_calls">Phone Calls</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="newsletter" id="provider_newsletter">
                                                    <label class="form-check-label" for="provider_newsletter">Newsletter</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-paper-plane me-2"></i>Complete Registration
                                        </button>
                                    </div>

                                    <div class="text-center mt-3">
                                        <small class="text-muted">
                                            By registering, you agree to our 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Terms of Service</a> and 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Privacy Policy</a>
                                        </small>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Individual Registration Form -->
                    <div id="individualForm" class="registration-form" style="display: none;">
                        <div class="card border-0 shadow-sm">
                            <!-- Header with Blue Users Icon -->
                            <div class="text-center py-4" style="background: linear-gradient(135deg, #4A90E2, #357ABD);">
                                <i class="fas fa-users text-white" style="font-size: 2.5rem;"></i>
                                <h3 class="text-white mt-2 mb-1">Individual Registration</h3>
                                <p class="text-white mb-0 opacity-75">Join SkyCareLink to access medical transport services for yourself or loved ones</p>
                            </div>
                            
                            <!-- Individual Benefits Section - Thin Cyan Strip -->
                            <div class="px-4 py-2" style="background-color: #17a2b8; color: white;">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-heart me-2"></i>
                                    <strong>Individual Benefits</strong>
                                </div>
                            </div>

                            <!-- Benefits Content -->
                            <div class="px-4 py-3" style="background-color: #17a2b8; color: white;">
                                <div class="row small">
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Compare quotes</strong> from multiple certified affiliates
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Transparent pricing</strong> with no hidden fees
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>24/7 customer support</strong> and assistance
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Real-time flight tracking</strong> and updates
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Insurance coordination</strong> and billing support
                                        </div>
                                        <div class="mb-1">
                                            <i class="fas fa-check me-2"></i>
                                            <strong>Family seating options</strong> and special accommodations
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick & Easy Section - Thin Green Strip -->
                            <div class="px-4 py-2" style="background-color: #28a745;">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-bolt text-white me-2"></i>
                                    <small class="text-white"><strong>Quick & Easy:</strong> Simple registration process. Start requesting transport quotes immediately after verification.</small>
                                </div>
                            </div>

                            <div class="card-body px-4">
                                <h6 class="mb-3">Personal Information</h6>
                                <form method="POST" action="{{ url_for('register_individual') }}">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                                    <div class="row">
                                        <div class="col-md-3 mb-3">
                                            <label for="first_name" class="form-label">First Name *</label>
                                            <input type="text" class="form-control" id="first_name" name="first_name" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="last_name" class="form-label">Last Name *</label>
                                            <input type="text" class="form-control" id="last_name" name="last_name" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="email" class="form-label">Email *</label>
                                            <input type="email" class="form-control" id="email" name="email" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="phone" class="form-label">Phone (Cell) *</label>
                                            <input type="tel" class="form-control" id="phone" name="phone" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="phone_24_7" class="form-label">Phone (24/7 number)</label>
                                            <input type="tel" class="form-control" id="phone_24_7" name="phone_24_7">
                                            <div class="form-check mt-2">
                                                <input class="form-check-input" type="checkbox" id="same_as_cell_individual" name="same_as_cell">
                                                <label class="form-check-label" for="same_as_cell_individual">
                                                    24/7 number same as cell phone
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="address" class="form-label">Your Address *</label>
                                        <textarea class="form-control" id="address" name="address" rows="2" required 
                                                  placeholder="Street Address"></textarea>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-3 mb-3">
                                            <label for="city" class="form-label">City</label>
                                            <input type="text" class="form-control" id="city" name="city" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="state" class="form-label">State</label>
                                            <input type="text" class="form-control" id="state" name="state" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="zip_code" class="form-label">ZIP Code</label>
                                            <input type="text" class="form-control" id="zip_code" name="zip_code" required>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <label for="country" class="form-label">USA</label>
                                            <select class="form-select" id="country" name="country" required>
                                                <option value="">USA</option>
                                                <option value="US" selected>United States</option>
                                                <option value="CA">Canada</option>
                                                <option value="MX">Mexico</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <h6>Communication Preferences</h6>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="email_updates" id="individual_email_updates" checked>
                                                    <label class="form-check-label" for="individual_email_updates">Email Updates</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="sms_notifications" id="individual_sms">
                                                    <label class="form-check-label" for="individual_sms">SMS Notifications</label>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="phone_calls" id="individual_phone_calls">
                                                    <label class="form-check-label" for="individual_phone_calls">Phone Calls</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="communication[]" value="newsletter" id="individual_newsletter">
                                                    <label class="form-check-label" for="individual_newsletter">Newsletter</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary btn-lg px-5">
                                            <i class="fas fa-paper-plane me-2"></i>Complete Registration
                                        </button>
                                    </div>

                                    <div class="text-center mt-3">
                                        <small class="text-muted">
                                            By registering, you agree to our 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Terms of Service</a> and 
                                            <a href="#" onclick="return false;" class="text-decoration-none">Privacy Policy</a>
                                        </small>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Initial Continue Button (shown when no type selected) -->
                <div id="initialContinue" class="text-center">
                    <p class="text-muted mb-4">Select an account type above to continue</p>
                    <div class="text-center mt-3">
                        <p class="text-muted">
                            Already have an account? 
                            <a href="{{ url_for('auth.login') }}" class="text-decoration-none">Sign in here</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
let selectedType = '';

function selectUserType(type, element) {
    // Remove previous selection from all cards
    document.querySelectorAll('#transportCard, #providerCard, #individualCard').forEach(card => {
        card.style.backgroundColor = '';
        card.style.borderColor = '#dee2e6';
        card.classList.remove('border-primary');
    });
    
    // Add selection highlighting to clicked card
    element.style.backgroundColor = '#e7f3ff';
    element.style.borderColor = '#4A90E2';
    element.classList.add('border-primary');
    
    // Store selected type
    selectedType = type;
    
    // Show registration forms section
    document.getElementById('registrationForms').style.display = 'block';
    
    // Hide all forms first
    document.querySelectorAll('.registration-form').forEach(form => {
        form.style.display = 'none';
    });
    
    // Show the selected form
    if (type === 'affiliate') {
        document.getElementById('affiliateForm').style.display = 'block';
    } else if (type === 'provider') {
        document.getElementById('providerForm').style.display = 'block';
    } else if (type === 'individual') {
        document.getElementById('individualForm').style.display = 'block';
    }
    
    // Scroll to form
    document.getElementById('registrationForms').scrollIntoView({ behavior: 'smooth' });
}

function toggleSamePhoneAff() {
    const businessPhone = document.getElementById('aff_phone');
    const afterHoursPhone = document.getElementById('aff_after_hours_phone');
    const checkbox = document.getElementById('aff_same_as_business_phone');
    
    if (checkbox.checked) {
        afterHoursPhone.value = businessPhone.value;
        afterHoursPhone.readOnly = true;
    } else {
        afterHoursPhone.readOnly = false;
    }
}

function toggleSamePhoneProvider() {
    const directPhone = document.getElementById('prov_phone');
    const cellPhone = document.getElementById('prov_cell_phone');
    const checkbox = document.getElementById('prov_same_as_direct_phone');
    
    if (checkbox.checked) {
        cellPhone.value = directPhone.value;
        cellPhone.readOnly = true;
    } else {
        cellPhone.readOnly = false;
    }
}

function toggleSamePhoneInd() {
    const primaryPhone = document.getElementById('ind_phone');
    const homePhone = document.getElementById('ind_home_phone');
    const checkbox = document.getElementById('ind_same_as_mobile');
    
    if (checkbox.checked) {
        homePhone.value = primaryPhone.value;
        homePhone.readOnly = true;
    } else {
        homePhone.readOnly = false;
    }
}

// Individual form phone checkbox handling
document.addEventListener('DOMContentLoaded', function() {
    const sameAsCellCheckbox = document.getElementById('same_as_cell_individual');
    const cellPhone = document.getElementById('phone_cell');
    const phone247 = document.getElementById('phone_24_7');
    
    if (sameAsCellCheckbox) {
        sameAsCellCheckbox.addEventListener('change', function() {
            if (this.checked) {
                phone247.value = cellPhone.value;
                phone247.readOnly = true;
            } else {
                phone247.readOnly = false;
            }
        });
    }
    
    if (cellPhone) {
        cellPhone.addEventListener('input', function() {
            if (sameAsCellCheckbox && sameAsCellCheckbox.checked) {
                phone247.value = this.value;
            }
        });
    }
});

function goBack() {
    // Hide registration forms
    document.getElementById('registrationForms').style.display = 'none';
    
    // Reset card highlighting
    document.querySelectorAll('#transportCard, #providerCard, #individualCard').forEach(card => {
        card.style.backgroundColor = '';
        card.style.borderColor = '#dee2e6';
        card.classList.remove('border-primary');
    });
    document.getElementById('initialContinue').style.display = 'block';
    
    // Remove selection
    document.querySelectorAll('.user-type-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    selectedType = '';
}
</script>
{% endblock %}