{% extends "base.html" %}

{% block title %}MediFly - Critical Transport Solutions{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8 text-center">
        <!-- Hero Section -->
        <div class="hero-section mb-5">
            <h1 class="display-4 fw-bold text-primary mb-4">
                MediFly for Hospitals: Critical Transport Solutions
            </h1>
            <p class="lead mb-4">
                Professional air medical transport coordination for hospital staff. 
                Fast, secure, and compliant with healthcare standards.
            </p>
            
            <!-- Enhanced Toggle Switch -->
            <div class="user-type-toggle mb-4">
                <div class="toggle-container">
                    <span class="toggle-label">I am a:</span>
                    <div class="toggle-switch">
                        <input type="radio" id="family" name="userType" value="family">
                        <label for="family" class="toggle-option family-option">
                            <i class="fas fa-users me-2"></i>
                            Family/Individual
                        </label>
                        
                        <input type="radio" id="hospital" name="userType" value="hospital" checked>
                        <label for="hospital" class="toggle-option hospital-option">
                            <i class="fas fa-hospital me-2"></i>
                            Hospital/Provider
                        </label>
                    </div>
                    <div class="toggle-description mt-2">
                        <small class="text-muted" id="toggle-description">
                            Professional medical transport coordination
                        </small>
                    </div>
                </div>
            </div>
            
            <a href="{{ url_for('intake') }}" 
               id="main-cta"
               class="btn btn-primary btn-lg px-5 py-3"
               aria-label="Start booking a critical medical flight">
                <i class="fas fa-plane-departure me-2" aria-hidden="true"></i>
                Book a Critical Medical Flight
            </a>
        </div>

        <!-- Login Access Section -->
        <div class="login-access-section mt-5 p-4" style="background: linear-gradient(135deg, #007bff, #0056b3); color: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,123,255,0.3);">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h3 class="mb-2"><i class="fas fa-tachometer-alt me-2"></i>Access Dashboard & Features</h3>
                    <p class="mb-3">Login to access admin panel, revenue storyboard, and role-based dashboards</p>
                    <div class="feature-highlights">
                        <span class="badge bg-light text-primary me-2">Revenue: $847,500</span>
                        <span class="badge bg-light text-primary me-2">7 Bookings Complete</span>
                        <span class="badge bg-light text-primary">Goal: 25 Bookings</span>
                    </div>
                </div>
                <div class="col-md-6 text-center">
                    <div class="login-buttons">
                        <a href="{{ url_for('login') }}" class="btn btn-light btn-lg mb-2 d-block">
                            <i class="fas fa-sign-in-alt me-2"></i>LOGIN TO DASHBOARD
                        </a>
                        <a href="{{ url_for('admin_storyboard') }}" class="btn btn-outline-light btn-lg d-block">
                            <i class="fas fa-chart-line me-2"></i>VIEW REVENUE STORYBOARD
                        </a>
                        <small class="text-white-50 mt-2 d-block">Use password "demo123" for any role</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Direct Login Form Section -->
        <div class="direct-login-section mt-4 p-4" style="background: linear-gradient(135deg, #6f42c1, #563d7c); color: white; border-radius: 15px;">
            <h4 class="text-center mb-3"><i class="fas fa-sign-in-alt me-2"></i>Quick Login Access</h4>
            <form action="{{ url_for('authenticate') }}" method="post" class="row g-3">
                <div class="col-md-6">
                    <label for="username" class="form-label">Username/Role</label>
                    <select class="form-select" name="username" id="username" required>
                        <option value="">Select your role...</option>
                        <option value="family_user">Family User</option>
                        <option value="hospital_staff">Hospital Staff</option>
                        <option value="provider">Provider</option>
                        <option value="mvp_user">MVP User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" name="password" id="password" 
                           placeholder="demo123" required>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-light btn-lg w-100">
                        <i class="fas fa-sign-in-alt me-2"></i>Login to Dashboard
                    </button>
                </div>
                <div class="col-12 text-center">
                    <small class="text-white-50">
                        Demo password: "demo123" works for all roles
                    </small>
                </div>
            </form>
        </div>

        <!-- Features Section -->
        <div class="row mt-5">
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-shield-alt fa-3x text-primary mb-3" aria-hidden="true"></i>
                        <h5 class="card-title">HIPAA Compliant</h5>
                        <p class="card-text">Fully compliant with healthcare privacy regulations</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-clock fa-3x text-primary mb-3" aria-hidden="true"></i>
                        <h5 class="card-title">24/7 Availability</h5>
                        <p class="card-text">Critical transport coordination available around the clock</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-user-md fa-3x text-primary mb-3" aria-hidden="true"></i>
                        <h5 class="card-title">Medical Expertise</h5>
                        <p class="card-text">Certified medical teams for all severity levels</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Handle enhanced toggle switch functionality
document.addEventListener('DOMContentLoaded', function() {
    const hospitalRadio = document.getElementById('hospital');
    const familyRadio = document.getElementById('family');
    const mainCTA = document.getElementById('main-cta');
    const toggleDescription = document.getElementById('toggle-description');
    
    // Family toggle handler - transform interface
    familyRadio.addEventListener('change', function() {
        if (this.checked) {
            // Update description and CTA
            toggleDescription.textContent = 'Personal medical transport for your loved one';
            mainCTA.innerHTML = '<i class="fas fa-heart me-2"></i>Family Portal Coming Soon';
            mainCTA.className = 'btn btn-outline-primary btn-lg px-5 py-3';
            mainCTA.style.cursor = 'not-allowed';
            
            // Update page styling for family mode
            document.querySelector('.hero-section h1').innerHTML = 'MediFly for Families: Caring Transport Solutions';
            document.querySelector('.hero-section p').innerHTML = 'Compassionate air medical transport for your loved ones. We understand this is a difficult time and we\'re here to help bring them home safely.';
            
            // Show family mode message
            const transitionDiv = document.createElement('div');
            transitionDiv.className = 'alert alert-info mt-3';
            transitionDiv.innerHTML = '<i class="fas fa-heart me-2"></i>Family portal interface activated. Full consumer app deployment available separately.';
            toggleDescription.parentNode.appendChild(transitionDiv);
        }
    });
    
    // Hospital toggle handler - restore hospital mode
    hospitalRadio.addEventListener('change', function() {
        if (this.checked) {
            toggleDescription.textContent = 'Professional medical transport coordination';
            mainCTA.href = '{{ url_for("intake") }}';
            mainCTA.innerHTML = '<i class="fas fa-plane-departure me-2"></i>Book a Critical Medical Flight';
            mainCTA.className = 'btn btn-primary btn-lg px-5 py-3';
            mainCTA.style.cursor = 'pointer';
            
            // Restore hospital styling
            document.querySelector('.hero-section h1').innerHTML = 'MediFly for Hospitals: Critical Transport Solutions';
            document.querySelector('.hero-section p').innerHTML = 'Professional air medical transport coordination for hospital staff. Fast, secure, and compliant with healthcare standards.';
            
            // Remove any transition messages
            const existingAlerts = document.querySelectorAll('.alert');
            existingAlerts.forEach(alert => {
                if (alert.textContent.includes('Family portal') || alert.textContent.includes('Redirecting')) {
                    alert.remove();
                }
            });
        }
    });
    
    // Initialize with hospital mode
    hospitalRadio.checked = true;
    toggleDescription.textContent = 'Professional medical transport coordination';
    
    // Initialize chatbot for landing page
    initializeChatbot([
        {
            trigger: 'welcome',
            message: 'Welcome to MediFly! I can help you understand our services.',
            type: 'text'
        },
        {
            trigger: 'equipment',
            message: 'What medical equipment is available?',
            type: 'text'
        },
        {
            trigger: 'equipment_response',
            message: 'We provide Ventilators, ECMO machines, Incubators, Oxygen support, and medical escorts. Each provider has different equipment capabilities.',
            type: 'text'
        },
        {
            trigger: 'severity',
            message: 'Can you explain severity levels?',
            type: 'text'
        },
        {
            trigger: 'severity_response',
            message: 'Severity 1: Minor conditions like fractures. Severity 2-3: Moderate conditions. Severity 4: Serious conditions requiring ICU. Severity 5: Critical conditions with life support needs.',
            type: 'text'
        }
    ]);
});
</script>
{% endblock %}
